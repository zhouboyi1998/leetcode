<h1 style="text-align: center;"> <span style="color: #FF2D55;">42. æ¥é›¨æ°´</span> </h1>

### ğŸš€ LeetCode

<base target="_blank">

<span style="color: #FF2D55;">**Hard**</span> [**https://leetcode.cn/problems/trapping-rain-water/**](https://leetcode.cn/problems/trapping-rain-water/)

---

### â“ Description

<br/>

ç»™å®š `n` ä¸ªéè´Ÿæ•´æ•°è¡¨ç¤ºæ¯ä¸ªå®½åº¦ä¸º `1` çš„æŸ±å­çš„é«˜åº¦å›¾ï¼Œè®¡ç®—æŒ‰æ­¤æ’åˆ—çš„æŸ±å­ï¼Œä¸‹é›¨ä¹‹åèƒ½æ¥å¤šå°‘é›¨æ°´ã€‚

<br/>

**ç¤ºä¾‹ 1ï¼š**

<img src="../../public/0042/trapping-rain-water-1.png" alt="trapping-rain-water-1.png"/>

```
è¾“å…¥: height = [0, 1, 0, 2, 1, 0, 1, 3, 2, 1, 2, 1]
è¾“å‡º: 6
è§£é‡Š: 
    * ä¸Šé¢æ˜¯ç”±æ•°ç»„ [0, 1, 0, 2, 1, 0, 1, 3, 2, 1, 2, 1] è¡¨ç¤ºçš„é«˜åº¦å›¾
    * åœ¨è¿™ç§æƒ…å†µä¸‹, å¯ä»¥æ¥ 6 ä¸ªå•ä½çš„é›¨æ°´ (è“è‰²éƒ¨åˆ†è¡¨ç¤ºé›¨æ°´)
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥: height = [4, 2, 0, 3, 2, 5]
è¾“å‡º: 9
```

<br/>

**æç¤ºï¼š**

* `n == height.length`
* `1 <= n <= 2 * 10^4`
* `0 <= height[i] <= 10^5`

---

### â— Solution

<br/>

#### idea

* ä½¿ç”¨ <span style="color: #AF52DE;">**å·¦å³æŒ‡é’ˆ**</span> è§£é¢˜
* å¦‚ **ç¤ºä¾‹å›¾ 1** æ‰€ç¤ºï¼Œå°†æ¯ä¸€åˆ—çœ‹æˆæ˜¯ä¸€æ ¹æŸ±å­
* æ¯æ ¹æŸ±å­é¡¶ä¸Šå¯ä»¥è£…å¤šå°‘æ°´ï¼Œå–å†³äºæŸ±å­ä¸¤è¾¹æ˜¯å¦éƒ½æœ‰æ¯”å®ƒæ›´é«˜çš„æŸ±å­
* å½“å‰æŸ±å­çš„è“„æ°´é‡æ˜¯ **å·¦è¾¹æœ€é«˜æŸ±å­çš„é«˜åº¦** å’Œ **å³è¾¹æœ€é«˜æŸ±å­çš„é«˜åº¦** ä¸­ **æ›´å°çš„é«˜åº¦**ï¼Œå‡å» **è‡ªå·±çš„é«˜åº¦**

<br/>

* `leftMax` è®°å½• `left` ä»å·¦å¾€å³éå†ä¸­é‡åˆ°çš„æœ€é«˜æŸ±å­çš„é«˜åº¦
* `rightMax` è®°å½• `right` ä»å³å¾€å·¦éå†ä¸­é‡åˆ°çš„æœ€é«˜æŸ±å­çš„é«˜åº¦

<br/>

* éå†æ•°ç»„
* æ›´æ–° **å·¦è¾¹æœ€é«˜æŸ±å­çš„é«˜åº¦** å’Œ **å³è¾¹æœ€é«˜æŸ±å­çš„é«˜åº¦**
* æ¯”è¾ƒä¸¤è¾¹çš„æœ€å¤§é«˜åº¦ä¸­å“ªä¸ªæ›´å°
* å¦‚æœå·¦è¾¹æŸ±å­é«˜åº¦æ›´ä½
* å¯¹äº `left` æŒ‡å‘çš„æŸ±å­è€Œè¨€ï¼Œè“„æ°´é‡å°±æ˜¯ **å·¦è¾¹æœ€é«˜æŸ±å­çš„é«˜åº¦** å‡å» **è‡ªå·±çš„é«˜åº¦**
* å¦‚æœå³è¾¹æŸ±å­é«˜åº¦æ›´ä½
* å¯¹äº `right` æŒ‡å‘çš„æŸ±å­è€Œè¨€ï¼Œè“„æ°´é‡å°±æ˜¯ **å³è¾¹æœ€é«˜æŸ±å­çš„é«˜åº¦** å‡å» **è‡ªå·±çš„é«˜åº¦**
* è®¡ç®—å®Œå½“å‰æŒ‡é’ˆæŒ‡å‘çš„æŸ±å­çš„è“„æ°´é‡ï¼Œå°±å°†å½“å‰æŒ‡é’ˆå‘ä¸­é—´ç§»ä¸€ä½
* æ‰€æœ‰æŸ±å­ä¸Šæ–¹çš„è“„æ°´é‡ç›¸åŠ ï¼Œå°±æ˜¯æœ€ç»ˆèƒ½æ¥åˆ°çš„é›¨æ°´æ€»é‡

<br/>

* **æ›´æ–°å·¦å³ä¸¤è¾¹æœ€é«˜æŸ±å­é«˜åº¦** çš„æ“ä½œè¦åœ¨ **æ¯”è¾ƒå“ªä¸ªé«˜åº¦æ›´å°** çš„æ“ä½œä¹‹å‰
* è¿™æ ·å³ä½¿ **å½“å‰æŸ±å­æ¯”å®ƒå‰é¢çš„æŸ±å­éƒ½è¦é«˜**ï¼Œè“„æ°´é‡ä¹Ÿä¸ä¼šè®¡ç®—å‡ºè´Ÿå€¼ä»è€Œå½±å“ç»“æœ
* ä¸”è“„æ°´é‡è®¡ç®—å…¶å®å°±æ˜¯ **è‡ªå·±çš„é«˜åº¦** å‡å» **è‡ªå·±çš„é«˜åº¦**ï¼Œæœ€ç»ˆè“„æ°´é‡ä¸º `0`ï¼Œä¸ä¼šå½±å“ç»“æœ

<br/>

#### C

```
int trap(int* height, int heightSize) {
    int result = 0;
    int left = 0;
    int right = heightSize - 1;
    int leftMax = 0;
    int rightMax = 0;
    while (left < right) {
        leftMax = fmax(leftMax, height[left]);
        rightMax = fmax(rightMax, height[right]);
        if (leftMax < rightMax) {
            result += leftMax - height[left];
            left++;
        } else {
            result += rightMax - height[right];
            right--;
        }
    }
    return result;
}
```

<br/>

#### C++

```
class Solution {
public:
    int trap(vector<int>& height) {
        int result = 0;
        int left = 0;
        int right = height.size() - 1;
        int leftMax = 0;
        int rightMax = 0;
        while (left < right) {
            leftMax = max(leftMax, height[left]);
            rightMax = max(rightMax, height[right]);
            if (leftMax < rightMax) {
                result += leftMax - height[left];
                left++;
            } else {
                result += rightMax - height[right];
                right--;
            }
        }
        return result;
    }
};
```

<br/>

#### Java

```
class Solution {
    public int trap(int[] height) {
        int result = 0;
        int left = 0;
        int right = height.length - 1;
        int leftMax = 0;
        int rightMax = 0;
        while (left < right) {
            leftMax = Math.max(leftMax, height[left]);
            rightMax = Math.max(rightMax, height[right]);
            if (leftMax < rightMax) {
                result += leftMax - height[left];
                left++;
            } else {
                result += rightMax - height[right];
                right--;
            }
        }
        return result;
    }
}
```

<br/>

#### Go

```
func trap(height []int) int {
    result := 0
    left := 0
    right := len(height) - 1
    leftMax := 0
    rightMax := 0
    for left < right {
        if (height[left] > leftMax) {
            leftMax = height[left]
        }
        if (height[right] > rightMax) {
            rightMax = height[right]
        }
        if (leftMax < rightMax) {
            result += leftMax - height[left]
            left++;
        } else {
            result += rightMax - height[right]
            right--
        }
    }
    return result
}
```

<br/>

#### Rust

```
impl Solution {
    pub fn trap(height: Vec<i32>) -> i32 {
        let mut result: i32 = 0;
        let mut left: usize = 0;
        let mut right: usize = height.len() - 1;
        let mut leftMax: i32 = 0;
        let mut rightMax: i32 = 0;
        while (left < right) {
            leftMax = leftMax.max(height[left]);
            rightMax = rightMax.max(height[right]);
            if (leftMax < rightMax) {
                result += leftMax - height[left];
                left += 1;
            } else {
                result += rightMax - height[right];
                right -= 1;
            }
        }
        return result;
    }
}
```
