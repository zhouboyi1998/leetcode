<h1 style="text-align: center;"> <span style="color: #FF2D55;">124. äºŒå‰æ ‘ä¸­çš„æœ€å¤§è·¯å¾„å’Œ</span> </h1>

### ğŸš€ LeetCode

<base target="_blank">

<span style="color: #FF2D55;">**Hard**</span> [**https://leetcode.cn/problems/binary-tree-maximum-path-sum/**](https://leetcode.cn/problems/binary-tree-maximum-path-sum/)

---

### â“ Description

<br/>

äºŒå‰æ ‘ä¸­çš„ **è·¯å¾„** è¢«å®šä¹‰ä¸ºä¸€æ¡èŠ‚ç‚¹åºåˆ—ï¼Œåºåˆ—ä¸­æ¯å¯¹ç›¸é‚»èŠ‚ç‚¹ä¹‹é—´éƒ½å­˜åœ¨ä¸€æ¡è¾¹ã€‚

åŒä¸€ä¸ªèŠ‚ç‚¹åœ¨ä¸€æ¡è·¯å¾„åºåˆ—ä¸­ **è‡³å¤šå‡ºç°ä¸€æ¬¡**ã€‚

è¯¥è·¯å¾„ **è‡³å°‘åŒ…å«ä¸€ä¸ª** èŠ‚ç‚¹ï¼Œä¸”ä¸ä¸€å®šç»è¿‡æ ¹èŠ‚ç‚¹ã€‚

**è·¯å¾„å’Œ** æ˜¯è·¯å¾„ä¸­å„èŠ‚ç‚¹å€¼çš„æ€»å’Œã€‚

ç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root` ï¼Œè¿”å›å…¶ **æœ€å¤§è·¯å¾„å’Œ**ã€‚

<br/>

**ç¤ºä¾‹ 1ï¼š**

<img src="../../public/0124/binary-tree-1.jpg" alt="binary-tree-1.jpg"/>

```
è¾“å…¥: root = [1, 2, 3]
è¾“å‡º: 6
è§£é‡Š: æœ€ä¼˜è·¯å¾„æ˜¯ 2 -> 1 -> 3, è·¯å¾„å’Œä¸º 2 + 1 + 3 = 6
```

**ç¤ºä¾‹ 2ï¼š**

<img src="../../public/0124/binary-tree-2.jpg" alt="binary-tree-2.jpg"/>

```
è¾“å…¥: root = [-10, 9, 20, null, null, 15, 7]
è¾“å‡º: 42
è§£é‡Š: æœ€ä¼˜è·¯å¾„æ˜¯ 15 -> 20 -> 7, è·¯å¾„å’Œä¸º 15 + 20 + 7 = 42
```

<br/>

**æç¤ºï¼š**

* æ ‘ä¸­èŠ‚ç‚¹æ•°ç›®èŒƒå›´æ˜¯ `[1, 3 * 10^4]`
* `-1000 <= Node.val <= 1000`

---

### â— Solution

<br/>

#### idea

* **é€’å½’**éå†äºŒå‰æ ‘

<br/>

* è®¡ç®—**æ¯ä¸ªèŠ‚ç‚¹ä½œä¸ºæ ¹èŠ‚ç‚¹æ—¶çš„æœ€å¤§è·¯å¾„å’Œ**ï¼Œæ›´æ–°**è®°å½•çš„æœ€å¤§è·¯å¾„å’Œ**
* å› ä¸º**å½“å‰èŠ‚ç‚¹ä½œä¸ºæ ¹èŠ‚ç‚¹**æ—¶ï¼Œ**è·¯å¾„**æ˜¯ï¼š`å·¦å­æ ‘ -> å½“å‰èŠ‚ç‚¹ -> å³å­æ ‘`
* æ‰€ä»¥**å½“å‰èŠ‚ç‚¹è‡ªèº«çš„æœ€å¤§è·¯å¾„å’Œ**ä¸ºï¼š`å·¦å­æ ‘æœ€å¤§è·¯å¾„å’Œ + å½“å‰èŠ‚ç‚¹çš„å€¼ + å³å­æ ‘æœ€å¤§è·¯å¾„å’Œ`

<br/>

* è®¡ç®—**æ¯ä¸ªèŠ‚ç‚¹è¿”å›ç»™çˆ¶èŠ‚ç‚¹ä½¿ç”¨çš„æœ€å¤§è·¯å¾„å’Œ**ï¼Œè¿”å›ç»™**çˆ¶èŠ‚ç‚¹**
* å› ä¸º**å½“å‰èŠ‚ç‚¹ä½œä¸ºçˆ¶èŠ‚ç‚¹çš„å­èŠ‚ç‚¹**æ—¶ï¼Œ**è·¯å¾„**æ˜¯ï¼š`çˆ¶èŠ‚ç‚¹ -> å½“å‰èŠ‚ç‚¹ -> å·¦å­æ ‘/å³å­æ ‘`
* æ‰€ä»¥**å½“å‰èŠ‚ç‚¹è¿”å›ç»™çˆ¶èŠ‚ç‚¹ä½¿ç”¨çš„æœ€å¤§è·¯å¾„å’Œ**ä¸ºï¼š`å½“å‰èŠ‚ç‚¹çš„å€¼ + å·¦å³å­æ ‘æœ€å¤§è·¯å¾„å’Œä¸­çš„è¾ƒå¤§å€¼`

<br/>

#### Java

```
/**
 * Definition for a binary tree node.
 * public class TreeNode {
 * int val;
 * TreeNode left;
 * TreeNode right;
 * TreeNode() {}
 * TreeNode(int val) { this.val = val; }
 * TreeNode(int val, TreeNode left, TreeNode right) {
 * this.val = val;
 * this.left = left;
 * this.right = right;
 * }
 * }
 */
class Solution {
    int maxPathSum = Integer.MIN_VALUE;

    public int maxPathSum(TreeNode root) {
        childMaxPathSum(root);
        return maxPathSum;
    }

    public int childMaxPathSum(TreeNode node) {
        if (node == null) {
            return 0;
        }

        int leftChildMaxPathSum = Math.max(childMaxPathSum(node.left), 0);
        int rightChildMaxPathSum = Math.max(childMaxPathSum(node.right), 0);

        // å½“å‰èŠ‚ç‚¹ä½œä¸ºæ ¹èŠ‚ç‚¹æ—¶, æœ€å¤§è·¯å¾„å’Œ = å·¦å­æ ‘æœ€å¤§è·¯å¾„å’Œ + å½“å‰èŠ‚ç‚¹çš„å€¼ + å³å­æ ‘æœ€å¤§è·¯å¾„å’Œ
        int nodeMaxPathSum = leftChildMaxPathSum + node.val + rightChildMaxPathSum;
        maxPathSum = Math.max(maxPathSum, nodeMaxPathSum);

        // å½“å‰èŠ‚ç‚¹ä½œä¸ºçˆ¶èŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ—¶, æœ€å¤§è·¯å¾„å’Œ = å½“å‰èŠ‚ç‚¹çš„å€¼ + å·¦å³å­æ ‘æœ€å¤§è·¯å¾„å’Œä¸­çš„è¾ƒå¤§å€¼
        return node.val + Math.max(leftChildMaxPathSum, rightChildMaxPathSum);
    }
}
```
